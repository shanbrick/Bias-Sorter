"use strict";(self["webpackChunkbias_sorter"]=self["webpackChunkbias_sorter"]||[]).push([[682],{3180:(e,t,o)=>{o.r(t),o.d(t,{default:()=>R});var r=o(56768),a=o(24232),n=o(45130),i=function(e){return(0,r.Qi)("data-v-47c99248"),e=e(),(0,r.jt)(),e},s={class:"topBar"},u=i((function(){return(0,r.Lk)("span",{style:{"font-size":"130%"}},"↥",-1)})),l=i((function(){return(0,r.Lk)("br",null,null,-1)})),c=i((function(){return(0,r.Lk)("button",{class:"uploadButton",id:"import"},"Upload List",-1)})),d={id:"unsorted",class:"unsorted"},p={class:"boxHeaderUnsorted"},g=i((function(){return(0,r.Lk)("p",{class:"categoryTitle"},"Unsorted",-1)})),h={class:"unsortedPeople"},f=["onClick"],m={id:"sidecatsG",class:"sideCats"},v=["id"],C=["onContextmenu"],k={key:0},y={class:"categoryTitle"},b={class:"categoryLength"},S={key:1},D=["onUpdate:modelValue","onInput"],L={key:0},x={class:"peopleDivss"},U=["onClick"];function A(e,t,i,A,N,F){var M=(0,r.g2)("ContextMenu"),w=(0,r.g2)("v-lazy-image"),O=(0,r.g2)("draggable");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",s,[(0,r.Lk)("button",{class:"topBarButton",onClick:t[0]||(t[0]=function(e){return F.openFileUploader()})},[(0,r.eW)(" "),u,(0,r.eW)(" Upload/Save List")]),(0,r.Lk)("button",{class:"topBarButton",onClick:t[1]||(t[1]=function(e){return F.addNewCategory()})}," +  Add New Category"),N.editModeOn?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"topBarButton",onClick:t[3]||(t[3]=function(e){return F.toggleEditModeOff()})}," ✓  Save Categories")):((0,r.uX)(),(0,r.CE)("button",{key:0,class:"topBarButton",onClick:t[2]||(t[2]=function(e){return F.toggleEditModeOn()})}," ✎  Edit Categories"))]),(0,r.bF)(M,{display:N.showContextMenu,ref:"menuGroup"},{default:(0,r.k6)((function(){return[(0,r.Lk)("p",{class:"contextButton",onClick:t[4]||(t[4]=function(e){return F.removeFromHome()})},"Remove "+(0,a.v_)(N.clickedGroup.groupName),1)]})),_:1},8,["display"]),(0,r.bF)(M,{display:N.showContextMenuCat,ref:"menuCatGroup"},{default:(0,r.k6)((function(){return[(0,r.Lk)("p",{class:"contextButton",onClick:t[5]||(t[5]=function(e){return F.removeFromHomeCat(e,!0)})},"Remove category and move groups to Unsorted"),l,(0,r.Lk)("p",{class:"contextButton",onClick:t[6]||(t[6]=function(e){return F.removeFromHomeCat(e,!1)})},"Remove category and groups")]})),_:1},8,["display"]),(0,r.bo)((0,r.Lk)("div",{class:"upload",onBlur:t[10]||(t[10]=function(){return e.close&&e.close.apply(e,arguments)})},[(0,r.Lk)("button",{class:"closeUpload",onClick:t[7]||(t[7]=function(e){return F.closeUploader()})},"╳"),(0,r.Lk)("button",{class:"uploadButton",style:{"margin-bottom":"20px"},onClick:t[8]||(t[8]=function(e){return F.saveJSON()})},"Save List"),(0,r.Lk)("input",{class:"uploadButton",type:"file",id:"selectFiles",onClick:t[9]||(t[9]=function(){return F.uploadFile&&F.uploadFile.apply(F,arguments)})}),c],544),[[n.aG,N.showFileUploader]]),(0,r.bo)((0,r.Lk)("button",{class:"showUnsButton",onClick:t[11]||(t[11]=function(e){return F.toggleUnsorted(1)})}," U ",512),[[n.aG,N.unsortedCollapsed]]),(0,r.bo)((0,r.Lk)("div",d,[(0,r.Lk)("div",p,[g,(0,r.Lk)("button",{class:"colUns",onClick:t[12]||(t[12]=function(e){return F.toggleUnsorted(0)})},"X")]),(0,r.Lk)("div",h,[(0,r.bF)(O,{list:N.homePageArrays[0],group:"everyone",animation:300,onChange:t[13]||(t[13]=function(e){return F.updateStorage(0,N.homePageArrays[0])}),disabled:N.editModeOn,"item-key":"a"},{item:(0,r.k6)((function(e){var t=e.element;return[((0,r.uX)(),(0,r.CE)("div",{class:"peopleDivss",key:t.groupName},[(0,r.bF)(w,{oncontextmenu:"return false;",onContextmenu:(0,n.D$)((function(e){return F.openContextMenu(e,t)}),["right"]),class:"homePeoplePics",src:o(74186)("./"+t.imgLink)},null,8,["onContextmenu","src"]),(0,r.Lk)("p",{class:"idolName",onClick:function(e){return F.populateGroupPage(t.groupName)}},(0,a.v_)(t.groupName),9,f)]))]})),_:1},8,["list","disabled"])])],512),[[n.aG,!N.unsortedCollapsed]]),(0,r.Lk)("div",m,[(0,r.bF)(O,{list:N.testArray,animation:300,onChange:t[14]||(t[14]=function(e){return F.updateCatOrder(N.testArray)}),disabled:!N.editModeOn,"item-key":"b"},{item:(0,r.k6)((function(e){var t=e.element,i=e.index;return[(0,r.Lk)("div",{id:t,class:"categories"},[(0,r.Lk)("div",{class:"boxHeaderCategories",onContextmenu:(0,n.D$)((function(e){return F.openContextMenuCat(e,t,i)}),["right"]),oncontextmenu:"return false;"},[N.editModeOn?((0,r.uX)(),(0,r.CE)("div",S,[(0,r.bo)((0,r.Lk)("input",{class:"boxHeaderCatsInput",type:"text","onUpdate:modelValue":function(e){return t.catName=e},onInput:function(e){return F.updateCatName(i+1)}},null,40,D),[[n.Jo,t.catName]])])):((0,r.uX)(),(0,r.CE)("div",k,[(0,r.Lk)("p",y,(0,a.v_)(t.catName),1),(0,r.Lk)("p",b,"Total: "+(0,a.v_)(t.groups.length),1)]))],40,C),N.editModeOn?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",L,[(0,r.bF)(O,{list:N.homePageArrays[i+1],group:"everyone",animations:300,onChange:function(e){return F.updateStorage(i+1,N.homePageArrays[i+1])},disabled:N.editModeOn,"item-key":"c"},{item:(0,r.k6)((function(e){var t=e.element;return[(0,r.Lk)("div",x,[(0,r.bF)(w,{oncontextmenu:"return false;",onContextmenu:(0,n.D$)((function(e){return F.openContextMenu(e,t)}),["right"]),class:"homePeoplePics",src:o(74186)("./"+t.imgLink)},null,8,["onContextmenu","src"]),(0,r.Lk)("p",{class:"idolName",onClick:function(e){return F.populateGroupPage(t.groupName)}},(0,a.v_)(t.groupName),9,U)])]})),_:2},1032,["list","onChange","disabled"])]))],8,v)]})),_:1},8,["list","disabled"])])],64)}var N=o(14048),F=o(30388),M=(o(2008),o(44114),o(60739),o(33110),o(79432),o(26099),o(47764),o(62953),o(3296),o(27208),o(48408),o(14603),o(47566),o(98721),o(25016)),w=o(90144),O=o(61527),P=o.n(O),B=o(44561),G=o(64163),E=o(26720);const $={name:"GroupListView",order:1,components:{draggable:P(),ContextMenu:B.A,VLazyImage:G.A},props:[],data:function(){return{homePageArrays:(0,w.KR)([]),testArray:(0,w.KR)([]),editModeOn:!1,showContextMenu:!1,showContextMenuCat:!1,showFileUploader:!1,clickedGroup:{},clickedCat:{},clickedIndex:0,groups:M,currUser:{},fireSaveData:{},unsortedCollapsed:!0}},mounted:function(){var e=this,t=(0,E.xI)();(0,E.hg)(t,(function(t){t&&e.initialize()}))},methods:{initialize:function(){var e=this;return(0,F.A)((0,N.A)().mark((function t(){var o,r,a,n,i,s;return(0,N.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=(0,E.xI)(),r=o.currentUser,e.currUser=r,t.next=5,e.$db.collection("users").doc(r.uid).get();case 5:for(a=t.sent,n=a.data(),e.fireSaveData=n,i=0;i<e.fireSaveData.groupCategories.length;i++)e.homePageArrays.push(e.fireSaveData.groupCategories[i].groups);for(s=1;s<e.fireSaveData.groupCategories.length;s++)e.testArray.push(e.fireSaveData.groupCategories[s]);case 10:case"end":return t.stop()}}),t)})))()},addNewCategory:function(){var e={catName:"Untitled",groups:[]};this.fireSaveData.groupCategories.push(e),this.$db.collection("users").doc(this.currUser.uid).set(this.fireSaveData),this.testArray.push(e),this.homePageArrays.push(e.groups)},toggleEditModeOn:function(){this.editModeOn=!this.editModeOn},toggleEditModeOff:function(){this.editModeOn=!this.editModeOn,window.location.reload()},updateCatOrder:function(e){console.log("update cat order",e);for(var t=0;t<e.length;t++)this.fireSaveData.groupCategories[t+1]=e[t];this.$db.collection("users").doc(this.currUser.uid).set(this.fireSaveData)},updateStorage:function(e,t){this.fireSaveData.groupCategories[e].groups=t,this.$db.collection("users").doc(this.currUser.uid).set(this.fireSaveData)},updateCatName:function(e){this.fireSaveData.groupCategories[e].catName,this.$db.collection("users").doc(this.currUser.uid).set(this.fireSaveData)},openContextMenu:function(e,t){this.clickedGroup=t,this.$refs.menuGroup.open(e)},openContextMenuCat:function(e,t,o){this.clickedCat=t,this.clickedIndex=o,this.$refs.menuCatGroup.open(e)},openFileUploader:function(){this.showFileUploader=!0},removeFromHome:function(e){var t=this;this.$refs.menuGroup.close(e);for(var o=0;o<this.fireSaveData.groupCategories.length;o++)for(var r=0;r<this.fireSaveData.groupCategories[o].groups.length;r++)if(this.fireSaveData.groupCategories[o].groups[r].imgLink===this.clickedGroup.imgLink){this.fireSaveData.groupCategories[o].groups=this.fireSaveData.groupCategories[o].groups.filter((function(e){return e.imgLink!==t.clickedGroup.imgLink})),this.$db.collection("users").doc(this.currUser.uid).set(this.fireSaveData),this.homePageArrays=[];for(var a=0;a<this.fireSaveData.groupCategories.length;a++)this.homePageArrays.push(this.fireSaveData.groupCategories[a].groups);break}},removeFromHomeCat:function(e,t){var o=this;this.$refs.menuCatGroup.close(e),console.log(this.clickedCat);for(var r=0;r<this.fireSaveData.groupCategories.length;r++)if(this.fireSaveData.groupCategories[r].catName===this.clickedCat.catName){if(t)for(var a=0;a<this.clickedCat.groups.length;a++)this.fireSaveData.groupCategories[0].groups.push(this.clickedCat.groups[a]);this.fireSaveData.groupCategories=this.fireSaveData.groupCategories.filter((function(e){return e.catName!==o.clickedCat.catName})),this.$db.collection("users").doc(this.currUser.uid).set(this.fireSaveData),this.homePageArrays=[];for(var n=0;n<this.fireSaveData.groupCategories.length;n++)this.homePageArrays.push(this.fireSaveData.groupCategories[n].people);this.testArray=[];for(var i=1;i<this.fireSaveData.groupCategories.length;i++)this.testArray.push(this.fireSaveData.groupCategories[i]);break}},populateGroupPage:function(e){for(var t=[],o=0;o<this.groups.length;o++)if(this.groups[o].groupName===e){t=this.groups[o];break}localStorage.setItem("selectedGroup",JSON.stringify(t)),this.$router.push("/groupPage"),document.body.scrollTop=0,document.documentElement.scrollTop=0},saveJSON:function(){var e=document.createElement("a"),t=new Blob([JSON.stringify(this.fireSaveData)],{type:"application/json"});e.href=URL.createObjectURL(t),e.download="exportSaveData.json",e.click(),this.showFileUploader=!1},uploadFile:function(){var e=this;document.getElementById("import").onclick=function(){var t=document.getElementById("selectFiles").files;if(t.length<=0)return!1;var o=new FileReader;o.onload=function(t){var o=JSON.parse(t.target.result);e.fireSaveData=o,e.$db.collection("users").doc(e.currUser.uid).set(e.fireSaveData),e.homePageArrays=[];for(var r=0;r<e.fireSaveData.groupCategories.length;r++)e.homePageArrays.push(e.fireSaveData.groupCategories[r].people);e.testArray=[];for(var a=1;a<e.fireSaveData.groupCategories.length;a++)e.testArray.push(e.fireSaveData.groupCategories[a])},o.readAsText(t.item(0)),e.showFileUploader=!1}},closeUploader:function(){this.showFileUploader=!1},toggleUnsorted:function(e){var t=document.getElementsByClassName("sideCats");1===e?(this.unsortedCollapsed=!1,t[0].style.marginLeft="375px",t[0].style.marginRight="0px"):(this.unsortedCollapsed=!0,t[0].style.marginLeft="50px",t[0].style.marginRight="50px")}}};var _=o(71241);const I=(0,_.A)($,[["render",A],["__scopeId","data-v-47c99248"]]),R=I}}]);
//# sourceMappingURL=682.9523a93d.js.map