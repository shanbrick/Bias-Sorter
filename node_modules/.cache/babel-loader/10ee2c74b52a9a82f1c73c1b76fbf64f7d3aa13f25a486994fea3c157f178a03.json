{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shan/SER375/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/shan/SER375/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url.to-json.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport html2canvas from 'html2canvas';\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nexport default {\n  name: \"ListSaver\",\n  mounted: function mounted() {\n    var _this = this;\n    var auth = getAuth();\n    onAuthStateChanged(auth, function (user) {\n      if (user) {\n        _this.initialize();\n      }\n    });\n  },\n  data: function data() {\n    return {\n      show: false,\n      fireSaveData: {},\n      jsonSave: false,\n      imageSave: true,\n      catSelection: 'Unsorted',\n      catOptions: []\n    };\n  },\n  methods: {\n    initialize: function initialize() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var auth, currentUser, userDoc, saveData, categories, groupCategories;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              auth = getAuth();\n              currentUser = auth.currentUser;\n              _this2.currUser = currentUser;\n              _context.next = 5;\n              return _this2.$db.collection(\"users\").doc(currentUser.uid).get();\n            case 5:\n              userDoc = _context.sent;\n              saveData = userDoc.data();\n              _this2.fireSaveData = saveData;\n              categories = _this2.fireSaveData.categories;\n              groupCategories = _this2.fireSaveData.groupCategories;\n              for (cat in categories) {\n                _this2.catOptions.push(cat.catName, \" - Biases\");\n              }\n              for (cat in groupCategories) {\n                _this2.catOptions.push(cat.catName, \" - Groups\");\n              }\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    close: function close() {\n      this.show = false;\n    },\n    open: function open() {\n      this.show = true;\n    },\n    uploadJSON: function uploadJSON() {\n      var _this3 = this;\n      document.getElementById(\"import\").onclick = function () {\n        var files = document.getElementById(\"selectFiles\").files;\n        if (files.length <= 0) {\n          return false;\n        }\n        var fr = new FileReader();\n        fr.onload = function (e) {\n          var result = JSON.parse(e.target.result);\n          _this3.fireSaveData = result;\n          _this3.$db.collection(\"users\").doc(_this3.currUser.uid).set(_this3.fireSaveData);\n          _this3.homePageArrays = [];\n          for (var i = 0; i < _this3.fireSaveData.categories.length; i++) {\n            _this3.homePageArrays.push(_this3.fireSaveData.categories[i].people);\n          }\n          _this3.testArray = [];\n          for (var _i = 1; _i < _this3.fireSaveData.categories.length; _i++) {\n            _this3.testArray.push(_this3.fireSaveData.categories[_i]);\n          }\n        };\n        fr.readAsText(files.item(0));\n        _this3.showFileUploader = false;\n      };\n    },\n    saveJSON: function saveJSON() {\n      var a = document.createElement(\"a\");\n      var file = new Blob([JSON.stringify(this.fireSaveData)], {\n        type: 'application/json'\n      });\n      a.href = URL.createObjectURL(file);\n      a.download = 'exportSaveData.json';\n      a.click();\n      this.showFileUploader = false;\n    },\n    saveAsImage: function saveAsImage(id) {\n      html2canvas(document.getElementById(id)).then(function (canvas) {\n        var link = document.createElement('a');\n        if (typeof link.download === 'string') {\n          link.href = canvas.toDataURL();\n          link.download = 'aaa.jpeg';\n\n          //Firefox requires the link to be in the body\n          document.body.appendChild(link);\n          //simulate click\n          link.click();\n          //remove the link when done\n          document.body.removeChild(link);\n        } else {\n          window.open(canvas.toDataURL());\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["html2canvas","getAuth","onAuthStateChanged","name","mounted","_this","auth","user","initialize","data","show","fireSaveData","jsonSave","imageSave","catSelection","catOptions","methods","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentUser","userDoc","saveData","categories","groupCategories","wrap","_callee$","_context","prev","next","currUser","$db","collection","doc","uid","get","sent","cat","push","catName","stop","close","open","uploadJSON","_this3","document","getElementById","onclick","files","length","fr","FileReader","onload","e","result","JSON","parse","target","set","homePageArrays","i","people","testArray","readAsText","item","showFileUploader","saveJSON","a","createElement","file","Blob","stringify","type","href","URL","createObjectURL","download","click","saveAsImage","id","then","canvas","link","toDataURL","body","appendChild","removeChild","window"],"sources":["/Users/shan/SER375/src/components/ListSaver.vue"],"sourcesContent":["<template>\n    <div class=\"listSaver\" v-show=\"show\" ref=\"saver\" tabindex=\"0\" @blur=\"close\">\n        <button class=\"closeUpload\" @click=\"close\">â•³</button>\n        <select v-model=\"catSelection\">\n            <option v-for=\"cat in catOptions\" :value=\"cat\">{{ cat }}</option>\n        </select>\n        <button class=\"uploadButton\" style=\"margin-bottom: 20px\" @click=\"saveJSON\">Save Category as Image</button>\n        <button class=\"uploadButton\" style=\"margin-bottom: 20px\" @click=\"saveJSON\">Save List as JSON</button>\n        <input class=\"uploadButton\" type=\"file\" id=\"selectFiles\" @click=\"uploadJSON\" />\n        <button class=\"uploadButton\" id=\"import\">Upload List</button>\n    </div>\n</template>\n\n<script>\nimport html2canvas from 'html2canvas';\nimport {\n    getAuth,\n    onAuthStateChanged,\n} from \"firebase/auth\";\n\nexport default {\n    name: \"ListSaver\",\n    mounted() {\n        const auth = getAuth();\n        onAuthStateChanged(auth, (user) => {\n            if (user) {\n                this.initialize();\n            }\n        });\n    },\n    data() {\n        return {\n            show: false,\n            fireSaveData: {},\n            jsonSave: false,\n            imageSave: true,\n            catSelection: 'Unsorted',\n            catOptions: []\n        }\n    },\n    methods: {\n        async initialize() {\n            const auth = getAuth();\n            const currentUser = auth.currentUser;\n            this.currUser = currentUser;\n            const userDoc = await this.$db.collection(\"users\").doc(currentUser.uid).get();\n            const saveData = userDoc.data();\n            this.fireSaveData = saveData;\n\n            const categories = this.fireSaveData.categories;\n            const groupCategories = this.fireSaveData.groupCategories;\n            for (cat in categories) {\n                this.catOptions.push(cat.catName, \" - Biases\");\n            }\n            for (cat in groupCategories) {\n                this.catOptions.push(cat.catName, \" - Groups\");\n            }\n        },\n        close() {\n            this.show = false;\n        },\n        open() {\n            this.show = true;\n        },\n        uploadJSON() {\n            document.getElementById(\"import\").onclick = () => {\n                const files = document.getElementById(\"selectFiles\").files;\n                if (files.length <= 0) {\n                    return false;\n                }\n\n                const fr = new FileReader();\n\n                fr.onload = (e) => {\n                    const result = JSON.parse(e.target.result);\n                    this.fireSaveData = result;\n\n                    this.$db.collection(\"users\").doc(this.currUser.uid).set(this.fireSaveData);\n\n                    this.homePageArrays = [];\n                    for (let i = 0; i < this.fireSaveData.categories.length; i++) {\n                        this.homePageArrays.push(this.fireSaveData.categories[i].people);\n                    }\n                    this.testArray = [];\n                    for (let i = 1; i < this.fireSaveData.categories.length; i++) {\n                        this.testArray.push(this.fireSaveData.categories[i]);\n                    }\n                };\n                fr.readAsText(files.item(0));\n                this.showFileUploader = false;\n            };\n        },\n        saveJSON() {\n            var a = document.createElement(\"a\");\n            var file = new Blob([JSON.stringify(this.fireSaveData)], { type: 'application/json' });\n            a.href = URL.createObjectURL(file);\n            a.download = 'exportSaveData.json';\n            a.click();\n            this.showFileUploader = false;\n        },\n        saveAsImage(id) {\n            html2canvas(document.getElementById(id)).then(canvas => {\n                var link = document.createElement('a');\n\n                if (typeof link.download === 'string') {\n                    link.href = canvas.toDataURL();\n                    link.download = 'aaa.jpeg';\n\n                    //Firefox requires the link to be in the body\n                    document.body.appendChild(link);\n                    //simulate click\n                    link.click();\n                    //remove the link when done\n                    document.body.removeChild(link);\n\n                } else {\n                    window.open(canvas.toDataURL());\n                }\n            });\n        }\n    }\n}\n</script>\n\n<style scoped>\n.listSaver {\n    background: white;\n    border-radius: 5px;\n    box-shadow: 0px 0px 5px black;\n    font-size: 13px;\n    height: fit-content;\n    margin: auto;\n    padding: 5px 10px;\n    line-height: 1px;\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 300px;\n    z-index: 999;\n}\n\n.uploadButton {\n    background-color: #b3b8e9;\n    border: 1px solid #848484;\n    border-radius: 5px;\n    color: rgb(0, 0, 0);\n    cursor: pointer;\n    display: inline-block;\n    font-size: 16px;\n    margin: 4px 2px;\n    padding: 7px 15px;\n    text-align: center;\n    text-decoration: none;\n    width: 100%;\n}\n\n.uploadButton:hover {\n    background-color: #505cc7;\n}\n\n.closeUpload {\n    background-color: #b3b8e9;\n    border: 1px solid #848484;\n    border-radius: 5px;\n    color: rgb(0, 0, 0);\n    cursor: pointer;\n    display: block;\n    float: right;\n    font-size: 16px;\n    margin-bottom: 20px;\n    text-align: center;\n    text-decoration: none;\n}\n\n.closeUpload:hover {\n    background-color: #505cc7;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}