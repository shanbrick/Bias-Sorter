{"ast":null,"code":"import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-529fd040\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"autocomplete\"\n};\nconst _hoisted_2 = {\n  class: \"autocomplete-results\"\n};\nconst _hoisted_3 = {\n  style: {\n    \"margin-bottom\": \"10px\"\n  }\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"threeDiv autocomplete-result\"\n};\nconst _hoisted_7 = {\n  class: \"acrSmall\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"acrSmall\"\n};\nconst _hoisted_10 = {\n  style: {\n    \"margin-bottom\": \"10px\"\n  }\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"src\"];\nconst _hoisted_13 = {\n  class: \"threeDiv autocomplete-result\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"acrSmall\"\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_16 = {\n  class: \"acrSmall\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.search = $event),\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.onChange && $options.onChange(...args)),\n    type: \"text\",\n    placeholder: \"Search...\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $data.search]]), _withDirectives(_createElementVNode(\"ul\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.peopleResults, result => {\n    return _openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"a\", {\n      style: {\n        \"display\": \"flex\"\n      },\n      href: \"/groupPage\",\n      onClick: $event => $options.setResultPeople(result)\n    }, [_createElementVNode(\"img\", {\n      class: \"threeDiv acPic\",\n      src: require('../assets/imageArchive/' + result.imgLink)\n    }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"p\", _hoisted_6, [_createTextVNode(_toDisplayString(result.stageName) + \" \", 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_7, _toDisplayString(result.fullName), 1 /* TEXT */), _hoisted_8, _createElementVNode(\"span\", _hoisted_9, _toDisplayString(result.grpName), 1 /* TEXT */)])], 8 /* PROPS */, _hoisted_4)]);\n  }), 256 /* UNKEYED_FRAGMENT */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.groupResults, result => {\n    return _openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"a\", {\n      style: {\n        \"display\": \"flex\"\n      },\n      href: \"/groupPage\",\n      onClick: $event => $options.setResultGroup(result)\n    }, [_createElementVNode(\"img\", {\n      class: \"threeDiv acPic\",\n      src: require('../assets/imageArchive/' + result.imgLink)\n    }, null, 8 /* PROPS */, _hoisted_12), _createElementVNode(\"p\", _hoisted_13, [_createTextVNode(_toDisplayString(result.groupName) + \" \", 1 /* TEXT */), result.members[0].grpName === result.members[0].stageName ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, _toDisplayString(result.members[0].fullName), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _hoisted_15, _createElementVNode(\"span\", _hoisted_16, _toDisplayString(result.company), 1 /* TEXT */)])], 8 /* PROPS */, _hoisted_11)]);\n  }), 256 /* UNKEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vShow, $data.isOpen]])]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","key","_createElementBlock","_hoisted_1","_cache","$event","$data","search","onInput","args","$options","onChange","type","placeholder","_hoisted_2","_Fragment","_renderList","peopleResults","result","_hoisted_3","href","onClick","setResultPeople","src","require","imgLink","_hoisted_5","_hoisted_6","_createTextVNode","_toDisplayString","stageName","_hoisted_7","fullName","_hoisted_8","_hoisted_9","grpName","_hoisted_4","groupResults","_hoisted_10","setResultGroup","_hoisted_12","_hoisted_13","groupName","members","_hoisted_14","_createCommentVNode","_hoisted_15","_hoisted_16","company","_hoisted_11","isOpen"],"sources":["/Users/shan/SER375/bias-sorter/src/components/SearchAutocomplete.vue"],"sourcesContent":["<template>\n    <div class=\"autocomplete\">\n        <input v-model=\"search\" @input=\"onChange\" type=\"text\" placeholder=\"Search...\" />\n        <ul v-show=\"isOpen\" class=\"autocomplete-results\">\n            <div style=\"margin-bottom: 10px\" v-for=\"result in peopleResults\">\n                <a style=\"display: flex\" href=\"/groupPage\" @click=\"setResultPeople(result)\">\n                    <img class=\"threeDiv acPic\" :src=\"require('../assets/imageArchive/' + result.imgLink)\" />\n                    <p class=\"threeDiv autocomplete-result\">\n                        {{ result.stageName }}\n                        <span class=\"acrSmall\"> {{ result.fullName }}</span>\n                        <br />\n                        <span class=\"acrSmall\">{{ result.grpName }}</span>\n                    </p>\n                </a>\n            </div>\n            <div style=\"margin-bottom: 10px\" v-for=\"result in groupResults\">\n                <a style=\"display: flex\" href=\"/groupPage\" @click=\"setResultGroup(result)\">\n                    <img class=\"threeDiv acPic\" :src=\"require('../assets/imageArchive/' + result.imgLink)\" />\n                    <p class=\"threeDiv autocomplete-result\">\n                        {{ result.groupName }}\n                        <span v-if=\"result.members[0].grpName === result.members[0].stageName\" class=\"acrSmall\">\n                            {{ result.members[0].fullName }}</span>\n                        <br />\n                        <span class=\"acrSmall\">{{ result.company }}</span>\n                    </p>\n                </a>\n            </div>\n        </ul>\n    </div>\n</template>\n\n<script>\nimport groupListEdit from \"@/groupListEdit.json\";\n\nexport default {\n    name: \"SearchAutocomplete\",\n    props: {\n        items: {\n            type: Array,\n            required: false,\n            default: () => [],\n        },\n    },\n    data() {\n        return {\n            groups: groupListEdit,\n            search: \"\",\n            groupResults: [],\n            peopleResults: [],\n            isOpen: false,\n            selectedGroupArray: JSON.parse(localStorage.getItem(\"selectedGroup\")),\n            fireSaveData: this.$db.collection(\"users\").doc(currentUser.uid).get(),\n        };\n    },\n    mounted() {\n        const auth = getAuth();\n        onAuthStateChanged(auth, (user) => {\n            if (user) {\n                this.initialize();\n            }\n        });\n        document.addEventListener(\"click\", this.handleClickOutside);\n    },\n    destroyed() {\n        document.removeEventListener(\"click\", this.handleClickOutside);\n    },\n    methods: {\n        async initialize() {\n            const auth = getAuth();\n            const currentUser = auth.currentUser;\n            this.currUser = currentUser;\n            const userDoc = await this.$db.collection(\"users\").doc(currentUser.uid).get();\n            if (userDoc.exists) {\n                const saveData = userDoc.data();\n                console.log(\"saveData\", saveData);\n                this.fireSaveData = saveData;\n                console.log(\"fireSaveData\", this.fireSaveData);\n                console.log(\"length\", this.fireSaveData.categories.length);\n\n                for (let i = 0; i < this.fireSaveData.categories.length; i++) {\n                    this.homePageArrays.push(this.fireSaveData.categories[i].people);\n                }\n\n                for (let i = 1; i < this.fireSaveData.categories.length; i++) {\n                    this.testArray.push(this.fireSaveData.categories[i]);\n                }\n            } else {\n                const saveData = await this.$db.collection(\"users\").doc(currentUser.uid).set(\n                    {\n                        \"categories\": [\n                            {\n                                \"catName\": \"Unsorted\",\n                                \"people\": []\n                            },\n                            {\n                                \"catName\": \"Ults\",\n                                \"people\": []\n                            },\n                            {\n                                \"catName\": \"Semis\",\n                                \"people\": []\n                            },\n                            {\n                                \"catName\": \"Regs\",\n                                \"people\": []\n                            }\n                        ]\n                    }\n                );\n            }\n        },\n        onChange() {\n            this.filterResults();\n            this.isOpen = true;\n            if (this.search === \"\") {\n                this.isOpen = false;\n            }\n        },\n        filterResults() {\n            let groupSearchArr = [];\n            for (let i = 0; i < this.groups.length; i++) {\n                let noSC = this.groups[i].groupName.replace(/[^a-zA-Z ]/g, \"\");\n                if (\n                    this.erm(this.groups[i].groupName) ||\n                    this.erm(this.groups[i].groupKR) ||\n                    this.erm(noSC) ||\n                    (this.erm(this.groups[i].members[0].fullName) && this.groups[i].bgs === \"s\") ||\n                    (this.erm(this.groups[i].members[0].fullKR) && this.groups[i].bgs === \"s\") ||\n                    this.erm(this.groups[i].company)\n                ) {\n                    groupSearchArr.push(this.groups[i]);\n                }\n            }\n            groupSearchArr = groupSearchArr.sort(\n                (a, b) => a.groupName.length - b.groupName.length\n            );\n\n            let stageSearch = [];\n            for (let i = 0; i < this.groups.length; i++) {\n                for (let j = 0; j < this.groups[i].members.length; j++) {\n                    let noSC = this.groups[i].members[j].stageName.replace(/[^a-zA-Z ]/g, \"\");\n                    if (\n                        (this.erm(this.groups[i].members[j].stageName) ||\n                            this.erm(noSC) ||\n                            this.erm(this.groups[i].members[j].stageKR)) &&\n                        (this.groups[i].members[j].afr === \"a\" ||\n                            this.groups[i].members[j].afr === \"f\") &&\n                        this.groups[i].bgs !== \"s\"\n                    ) {\n                        stageSearch.push(this.groups[i].members[j]);\n                        stageSearch = stageSearch.sort(\n                            (a, b) => a.stageName.length - b.stageName.length\n                        );\n                    }\n                }\n            }\n            let fullSearch = [];\n            for (let i = 0; i < this.groups.length; i++) {\n                for (let j = 0; j < this.groups[i].members.length; j++) {\n                    let noSC = this.groups[i].members[j].stageName.replace(/[^a-zA-Z ]/g, \"\");\n                    if (\n                        (this.erm(this.groups[i].members[j].fullName) ||\n                            this.erm(this.groups[i].members[j].fullKR)) &&\n                        (this.groups[i].members[j].afr === \"a\" ||\n                            this.groups[i].members[j].afr === \"f\") &&\n                        this.groups[i].bgs !== \"s\" &&\n                        !this.checkInArr(this.groups[i].members[j], stageSearch)\n                    ) {\n                        fullSearch.push(this.groups[i].members[j]);\n                        fullSearch = fullSearch.sort(\n                            (a, b) => a.stageName.length - b.stageName.length\n                        );\n                    }\n                }\n            }\n\n            this.groupResults = [];\n            this.peopleResults = [];\n            for (let i = 0; i < stageSearch.length; i++) {\n                this.peopleResults.push(stageSearch[i]);\n            }\n            for (let i = 0; i < fullSearch.length; i++) {\n                this.peopleResults.push(fullSearch[i]);\n            }\n            for (let i = 0; i < groupSearchArr.length; i++) {\n                this.groupResults.push(groupSearchArr[i]);\n            }\n        },\n        erm(word) {\n            return word.toLowerCase().indexOf(this.search.toLowerCase()) > -1;\n        },\n        setResult(result) {\n            this.search = result;\n            this.isOpen = false;\n            if (this.selectedGroupArray === null) {\n                this.selectedGroupArray = [];\n            }\n            this.selectedGroupArray = result;\n            localStorage.setItem(\"selectedGroup\", JSON.stringify(this.selectedGroupArray));\n        },\n        setResultGroup(result) {\n            this.search = result.groupName;\n            this.isOpen = false;\n            if (this.selectedGroupArray === null) {\n                this.selectedGroupArray = [];\n            }\n            this.selectedGroupArray = result;\n            localStorage.setItem(\"selectedGroup\", JSON.stringify(this.selectedGroupArray));\n        },\n        setResultPeople(result) {\n            this.search = result.stageName;\n            this.isOpen = false;\n            if (this.selectedGroupArray === null) {\n                this.selectedGroupArray = [];\n            }\n            for (let i = 0; i < this.groups.length; i++) {\n                for (let j = 0; j < this.groups[i].members.length; j++) {\n                    if (this.groups[i].members[j] === result) {\n                        this.selectedGroupArray = this.groups[i];\n                        break;\n                    }\n                }\n            }\n            localStorage.setItem(\"selectedGroup\", JSON.stringify(this.selectedGroupArray));\n        },\n        checkInArr(search, bigArr) {\n            for (let i = 0; i < bigArr.length; i++) {\n                if (search === bigArr[i]) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        removeFromHome(person) {\n            for (let i = 0; i < this.fireSaveData.categories.length; i++) {\n                for (let j = 0; j < this.fireSaveData.categories[i].people.length; j++) {\n                    if (this.saveData.categories[i].people[j].imgLink === person.imgLink) {\n                        this.saveData.categories[i].people = this.saveData.categories[\n                            i\n                        ].people.filter((p) => {\n                            return p.imgLink !== person.imgLink;\n                        });\n                        localStorage.setItem(\"save_data\", JSON.stringify(this.saveData));\n                        break;\n                    }\n                }\n            }\n        },\n        checkPerson(input) {\n            for (var i = 0; i < this.saveData.categories.length; i++) {\n                let array = this.saveData.categories[i].people;\n                for (var j = 0; j < array.length; j++) {\n                    if (array[j].imgLink === input) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        },\n        handleClickOutside(event) {\n            if (!this.$el.contains(event.target)) {\n                this.isOpen = false;\n            }\n        },\n    },\n};\n</script>\n\n<style scoped>\n.autocomplete {\n    z-index: 1;\n    width: 350px;\n    color: black;\n}\n\n.autocomplete-results {\n    width: 350px;\n    z-index: 1;\n    position: absolute;\n    padding: 10px;\n    padding-bottom: 5px;\n    margin: 10px;\n    margin-top: 0px;\n    box-shadow: 0px 0px 5px #00000080;\n    border-radius: 5px;\n    background: white;\n    height: fit-content;\n    min-height: 1em;\n    max-height: 500px;\n    overflow: auto;\n    color: black;\n}\n\n.autocomplete-results:after {\n    content: \"\";\n    display: table;\n    clear: both;\n}\n\na:hover {\n    background-color: #b3b8e9;\n    border-radius: 5px;\n}\n\n.threeDiv {\n    float: left;\n}\n\n.acPic {\n    /* float: left; */\n    height: 67px;\n    width: 83.75px;\n    margin-right: 10px;\n    object-fit: cover;\n    border-radius: 5px;\n}\n\n.autocomplete-result {\n    font-weight: bold;\n    z-index: 2;\n    list-style: none;\n    text-align: left;\n    text-decoration: none;\n    padding: 0px;\n    margin: auto;\n    margin-left: 0px;\n    cursor: pointer;\n    /* border-bottom: 1px solid #00000036; */\n    overflow-x: visible;\n    color: black;\n}\n\n.acrSmall {\n    z-index: 2;\n    font-size: 70%;\n    list-style: none;\n    text-align: left;\n    text-decoration: none;\n    margin: auto;\n    cursor: pointer;\n    color: black;\n    font-weight: lighter;\n}\n</style>\n"],"mappings":";;;EACSA,KAAK,EAAC;AAAc;;EAEDA,KAAK,EAAC;AAAsB;;EACvCC,KAA2B,EAA3B;IAAA;EAAA;AAA2B;mBAJ5C;mBAAA;;EAOuBD,KAAK,EAAC;AAA8B;;EAE7BA,KAAK,EAAC;AAAU;gEACtBE,mBAAA,CAAM;;EACAF,KAAK,EAAC;AAAU;;EAI7BC,KAA2B,EAA3B;IAAA;EAAA;AAA2B;oBAf5C;oBAAA;;EAkBuBD,KAAK,EAAC;AAA8B;;EAlB3DG,GAAA;EAoB+FH,KAAK,EAAC;;iEAE7EE,mBAAA,CAAM;;EACAF,KAAK,EAAC;AAAU;;uBAtB1CI,mBAAA,CA2BM,OA3BNC,UA2BM,G,gBA1BFH,mBAAA,CAAgF;IAFxF,uBAAAI,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAEwBC,KAAA,CAAAC,MAAM,GAAAF,MAAA;IAAGG,OAAK,EAAAJ,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAEC,QAAA,CAAAC,QAAA,IAAAD,QAAA,CAAAC,QAAA,IAAAF,IAAA,CAAQ;IAAEG,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iEAAlDP,KAAA,CAAAC,MAAM,E,mBACtBP,mBAAA,CAwBK,MAxBLc,UAwBK,I,kBAvBDZ,mBAAA,CAUMa,SAAA,QAdlBC,WAAA,CAI8DV,KAAA,CAAAW,aAAa,EAAvBC,MAAM;yBAA9ChB,mBAAA,CAUM,OAVNiB,UAUM,GATFnB,mBAAA,CAQI;MARDD,KAAqB,EAArB;QAAA;MAAA,CAAqB;MAACqB,IAAI,EAAC,YAAY;MAAEC,OAAK,EAAAhB,MAAA,IAAEK,QAAA,CAAAY,eAAe,CAACJ,MAAM;QACrElB,mBAAA,CAAyF;MAApFF,KAAK,EAAC,gBAAgB;MAAEyB,GAAG,EAAEC,OAAO,6BAA6BN,MAAM,CAACO,OAAO;4BANxGC,UAAA,GAOoB1B,mBAAA,CAKI,KALJ2B,UAKI,GAZxBC,gBAAA,CAAAC,gBAAA,CAQ2BX,MAAM,CAACY,SAAS,IAAG,GACtB,iBAAA9B,mBAAA,CAAoD,QAApD+B,UAAoD,EAAAF,gBAAA,CAAzBX,MAAM,CAACc,QAAQ,kBAC1CC,UAAM,EACNjC,mBAAA,CAAkD,QAAlDkC,UAAkD,EAAAL,gBAAA,CAAxBX,MAAM,CAACiB,OAAO,iB,mBAXhEC,UAAA,E;uDAeYlC,mBAAA,CAWMa,SAAA,QA1BlBC,WAAA,CAe8DV,KAAA,CAAA+B,YAAY,EAAtBnB,MAAM;yBAA9ChB,mBAAA,CAWM,OAXNoC,WAWM,GAVFtC,mBAAA,CASI;MATDD,KAAqB,EAArB;QAAA;MAAA,CAAqB;MAACqB,IAAI,EAAC,YAAY;MAAEC,OAAK,EAAAhB,MAAA,IAAEK,QAAA,CAAA6B,cAAc,CAACrB,MAAM;QACpElB,mBAAA,CAAyF;MAApFF,KAAK,EAAC,gBAAgB;MAAEyB,GAAG,EAAEC,OAAO,6BAA6BN,MAAM,CAACO,OAAO;4BAjBxGe,WAAA,GAkBoBxC,mBAAA,CAMI,KANJyC,WAMI,GAxBxBb,gBAAA,CAAAC,gBAAA,CAmB2BX,MAAM,CAACwB,SAAS,IAAG,GACtB,iBAAYxB,MAAM,CAACyB,OAAO,IAAIR,OAAO,KAAKjB,MAAM,CAACyB,OAAO,IAAIb,SAAS,I,cAArE5B,mBAAA,CAC2C,QAD3C0C,WAC2C,EAAAf,gBAAA,CAApCX,MAAM,CAACyB,OAAO,IAAIX,QAAQ,oBArBzDa,mBAAA,gBAsBwBC,WAAM,EACN9C,mBAAA,CAAkD,QAAlD+C,WAAkD,EAAAlB,gBAAA,CAAxBX,MAAM,CAAC8B,OAAO,iB,mBAvBhEC,WAAA,E;sEAGoB3C,KAAA,CAAA4C,MAAM,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}