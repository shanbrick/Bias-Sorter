{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shan/SER375/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/shan/SER375/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _this = this;\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nvar router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes: [{\n    path: '/',\n    name: 'home',\n    component: function component() {\n      return import('../views/HomeView.vue');\n    }\n  }, {\n    path: '/list',\n    name: 'list',\n    component: function component() {\n      return import('../views/ListView.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/groupList',\n    name: 'groupList',\n    component: function component() {\n      return import('../views/GroupListView.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/groups',\n    name: 'groups',\n    component: function component() {\n      return import('../views/GroupsView.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/groupPage',\n    name: 'groupPage',\n    component: function component() {\n      return import('../views/GroupInfoView.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/birthdays',\n    name: 'birthdays',\n    component: function component() {\n      return import('../views/Birthdays.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/spreadsheet',\n    name: 'spreadsheet',\n    component: function component() {\n      return import('../views/Spreadsheet.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }]\n});\n\n// const getCurrentUser = () => {\n//   return new Promise((resolve, reject) => {\n//     const removeListener = onAuthStateChanged(\n//       getAuth(),\n//       (user) => {\n//         removeListener();\n//         resolve(user);\n//       },\n//       reject\n//     )\n//   });\n// }\n\nrouter.beforeEach( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(to) {\n    var currentUser, auth, _currentUser, userDoc, saveData, i, _i, _saveData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!to.meta.requiresAuth) {\n            _context.next = 23;\n            break;\n          }\n          _context.next = 3;\n          return getCurrentUser();\n        case 3:\n          currentUser = _context.sent;\n          if (currentUser) {\n            _context.next = 23;\n            break;\n          }\n          auth = getAuth();\n          _currentUser = auth.currentUser;\n          _this.currUser = _currentUser;\n          _context.next = 10;\n          return _this.$db.collection(\"users\").doc(_currentUser.uid).get();\n        case 10:\n          userDoc = _context.sent;\n          if (!userDoc.exists) {\n            _context.next = 19;\n            break;\n          }\n          saveData = userDoc.data();\n          _this.fireSaveData = saveData;\n          if (_this.fireSaveData.groupCategories === undefined) {\n            _this.$db.collection(\"users\").doc(_this.currUser.uid).set({\n              \"groupCategories\": [{\n                \"catName\": \"Unsorted\",\n                \"groups\": []\n              }, {\n                \"catName\": \"Ults\",\n                \"groups\": []\n              }, {\n                \"catName\": \"Semis\",\n                \"groups\": []\n              }, {\n                \"catName\": \"Regs\",\n                \"groups\": []\n              }]\n            }, {\n              merge: true\n            });\n          }\n          for (i = 0; i < _this.fireSaveData.categories.length; i++) {\n            _this.homePageArrays.push(_this.fireSaveData.categories[i].people);\n          }\n          for (_i = 1; _i < _this.fireSaveData.categories.length; _i++) {\n            _this.testArray.push(_this.fireSaveData.categories[_i]);\n          }\n          _context.next = 22;\n          break;\n        case 19:\n          _context.next = 21;\n          return _this.$db.collection(\"users\").doc(_currentUser.uid).set({\n            \"categories\": [{\n              \"catName\": \"Unsorted\",\n              \"people\": []\n            }, {\n              \"catName\": \"Ults\",\n              \"people\": []\n            }, {\n              \"catName\": \"Semis\",\n              \"people\": []\n            }, {\n              \"catName\": \"Regs\",\n              \"people\": []\n            }],\n            \"groupCategories\": [{\n              \"catName\": \"Unsorted\",\n              \"groups\": []\n            }, {\n              \"catName\": \"Ults\",\n              \"groups\": []\n            }, {\n              \"catName\": \"Semis\",\n              \"groups\": []\n            }, {\n              \"catName\": \"Regs\",\n              \"groups\": []\n            }]\n          });\n        case 21:\n          _saveData = _context.sent;\n        case 22:\n          return _context.abrupt(\"return\", {\n            query: {\n              // we keep the current path in the query so we can\n              // redirect to it after login with\n              // `router.push(route.query.redirect || '/')`\n              redirect: to.fullPath\n            }\n          });\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","router","history","process","env","BASE_URL","routes","path","name","component","meta","requiresAuth","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","currentUser","auth","_currentUser","userDoc","saveData","i","_i","_saveData","wrap","_callee$","_context","prev","next","getCurrentUser","sent","getAuth","_this","currUser","$db","collection","doc","uid","get","exists","data","fireSaveData","groupCategories","undefined","set","merge","categories","length","homePageArrays","push","people","testArray","abrupt","query","redirect","fullPath","stop","_x","apply","arguments"],"sources":["/Users/shan/SER375/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: () => import('../views/HomeView.vue'),\n    },\n    {\n      path: '/list',\n      name: 'list',\n      component: () => import('../views/ListView.vue'),\n      meta: {\n        requiresAuth: true,\n      }\n    },\n    {\n      path: '/groupList',\n      name: 'groupList',\n      component: () => import('../views/GroupListView.vue'),\n      meta: {\n        requiresAuth: true,\n      }\n    },\n    {\n      path: '/groups',\n      name: 'groups',\n      component: () => import('../views/GroupsView.vue'),\n      meta: {\n        requiresAuth: true,\n      }\n    },\n    {\n      path: '/groupPage',\n      name: 'groupPage',\n      component: () => import('../views/GroupInfoView.vue'),\n      meta: {\n        requiresAuth: true,\n      }\n    },\n    {\n      path: '/birthdays',\n      name: 'birthdays',\n      component: () => import('../views/Birthdays.vue'),\n      meta: {\n        requiresAuth: true,\n      }\n    },\n    {\n      path: '/spreadsheet',\n      name: 'spreadsheet',\n      component: () => import('../views/Spreadsheet.vue'),\n      meta: {\n        requiresAuth: true,\n      }\n    }\n  ]\n});\n\n// const getCurrentUser = () => {\n//   return new Promise((resolve, reject) => {\n//     const removeListener = onAuthStateChanged(\n//       getAuth(),\n//       (user) => {\n//         removeListener();\n//         resolve(user);\n//       },\n//       reject\n//     )\n//   });\n// }\n\nrouter.beforeEach(async (to) => {\n  // routes with `meta: { requiresAuth: true }` will check for\n  // the users, others won't\n  if (to.meta.requiresAuth) {\n    const currentUser = await getCurrentUser()\n    // if the user is not logged in, redirect to the login page\n    if (!currentUser) {\n      const auth = getAuth();\n      const currentUser = auth.currentUser;\n      this.currUser = currentUser;\n      const userDoc = await this.$db.collection(\"users\").doc(currentUser.uid).get();\n      if (userDoc.exists) {\n        const saveData = userDoc.data();\n        this.fireSaveData = saveData;\n        if (this.fireSaveData.groupCategories === undefined) {\n          this.$db.collection(\"users\").doc(this.currUser.uid).set(\n            {\n              \"groupCategories\": [\n                {\n                  \"catName\": \"Unsorted\",\n                  \"groups\": []\n                },\n                {\n                  \"catName\": \"Ults\",\n                  \"groups\": []\n                },\n                {\n                  \"catName\": \"Semis\",\n                  \"groups\": []\n                },\n                {\n                  \"catName\": \"Regs\",\n                  \"groups\": []\n                }\n              ]\n            }, { merge: true }\n          );\n        }\n\n        for (let i = 0; i < this.fireSaveData.categories.length; i++) {\n          this.homePageArrays.push(this.fireSaveData.categories[i].people);\n        }\n\n        for (let i = 1; i < this.fireSaveData.categories.length; i++) {\n          this.testArray.push(this.fireSaveData.categories[i]);\n        }\n      } else {\n        const saveData = await this.$db.collection(\"users\").doc(currentUser.uid).set(\n          {\n            \"categories\": [\n              {\n                \"catName\": \"Unsorted\",\n                \"people\": []\n              },\n              {\n                \"catName\": \"Ults\",\n                \"people\": []\n              },\n              {\n                \"catName\": \"Semis\",\n                \"people\": []\n              },\n              {\n                \"catName\": \"Regs\",\n                \"people\": []\n              }\n            ],\n            \"groupCategories\": [\n              {\n                \"catName\": \"Unsorted\",\n                \"groups\": []\n              },\n              {\n                \"catName\": \"Ults\",\n                \"groups\": []\n              },\n              {\n                \"catName\": \"Semis\",\n                \"groups\": []\n              },\n              {\n                \"catName\": \"Regs\",\n                \"groups\": []\n              }\n            ]\n          }\n        );\n      }\n      return {\n        query: {\n          // we keep the current path in the query so we can\n          // redirect to it after login with\n          // `router.push(route.query.redirect || '/')`\n          redirect: to.fullPath,\n        },\n      }\n    }\n  }\n})\n\nexport default router\n"],"mappings":";;;;;;;AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAE3D,IAAMC,MAAM,GAAGF,YAAY,CAAC;EAC1BG,OAAO,EAAEF,gBAAgB,CAACG,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;EAC/CC,MAAM,EAAE,CACN;IACEC,IAAI,EAAE,GAAG;IACTC,IAAI,EAAE,MAAM;IACZC,SAAS,EAAE,SAAAA,UAAA;MAAA,OAAM,MAAM,CAAC,uBAAuB,CAAC;IAAA;EAClD,CAAC,EACD;IACEF,IAAI,EAAE,OAAO;IACbC,IAAI,EAAE,MAAM;IACZC,SAAS,EAAE,SAAAA,UAAA;MAAA,OAAM,MAAM,CAAC,uBAAuB,CAAC;IAAA;IAChDC,IAAI,EAAE;MACJC,YAAY,EAAE;IAChB;EACF,CAAC,EACD;IACEJ,IAAI,EAAE,YAAY;IAClBC,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAE,SAAAA,UAAA;MAAA,OAAM,MAAM,CAAC,4BAA4B,CAAC;IAAA;IACrDC,IAAI,EAAE;MACJC,YAAY,EAAE;IAChB;EACF,CAAC,EACD;IACEJ,IAAI,EAAE,SAAS;IACfC,IAAI,EAAE,QAAQ;IACdC,SAAS,EAAE,SAAAA,UAAA;MAAA,OAAM,MAAM,CAAC,yBAAyB,CAAC;IAAA;IAClDC,IAAI,EAAE;MACJC,YAAY,EAAE;IAChB;EACF,CAAC,EACD;IACEJ,IAAI,EAAE,YAAY;IAClBC,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAE,SAAAA,UAAA;MAAA,OAAM,MAAM,CAAC,4BAA4B,CAAC;IAAA;IACrDC,IAAI,EAAE;MACJC,YAAY,EAAE;IAChB;EACF,CAAC,EACD;IACEJ,IAAI,EAAE,YAAY;IAClBC,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAE,SAAAA,UAAA;MAAA,OAAM,MAAM,CAAC,wBAAwB,CAAC;IAAA;IACjDC,IAAI,EAAE;MACJC,YAAY,EAAE;IAChB;EACF,CAAC,EACD;IACEJ,IAAI,EAAE,cAAc;IACpBC,IAAI,EAAE,aAAa;IACnBC,SAAS,EAAE,SAAAA,UAAA;MAAA,OAAM,MAAM,CAAC,0BAA0B,CAAC;IAAA;IACnDC,IAAI,EAAE;MACJC,YAAY,EAAE;IAChB;EACF,CAAC;AAEL,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAV,MAAM,CAACW,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAOC,EAAE;IAAA,IAAAC,WAAA,EAAAC,IAAA,EAAAC,YAAA,EAAAC,OAAA,EAAAC,QAAA,EAAAC,CAAA,EAAAC,EAAA,EAAAC,SAAA;IAAA,OAAAX,mBAAA,GAAAY,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,KAGrBb,EAAE,CAACR,IAAI,CAACC,YAAY;YAAAkB,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OACIC,cAAc,CAAC,CAAC;QAAA;UAApCb,WAAW,GAAAU,QAAA,CAAAI,IAAA;UAAA,IAEZd,WAAW;YAAAU,QAAA,CAAAE,IAAA;YAAA;UAAA;UACRX,IAAI,GAAGc,OAAO,CAAC,CAAC;UAChBf,YAAW,GAAGC,IAAI,CAACD,WAAW;UACpCgB,KAAI,CAACC,QAAQ,GAAGjB,YAAW;UAACU,QAAA,CAAAE,IAAA;UAAA,OACNI,KAAI,CAACE,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAACpB,YAAW,CAACqB,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC;QAAA;UAAvEnB,OAAO,GAAAO,QAAA,CAAAI,IAAA;UAAA,KACTX,OAAO,CAACoB,MAAM;YAAAb,QAAA,CAAAE,IAAA;YAAA;UAAA;UACVR,QAAQ,GAAGD,OAAO,CAACqB,IAAI,CAAC,CAAC;UAC/BR,KAAI,CAACS,YAAY,GAAGrB,QAAQ;UAC5B,IAAIY,KAAI,CAACS,YAAY,CAACC,eAAe,KAAKC,SAAS,EAAE;YACnDX,KAAI,CAACE,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAACJ,KAAI,CAACC,QAAQ,CAACI,GAAG,CAAC,CAACO,GAAG,CACrD;cACE,iBAAiB,EAAE,CACjB;gBACE,SAAS,EAAE,UAAU;gBACrB,QAAQ,EAAE;cACZ,CAAC,EACD;gBACE,SAAS,EAAE,MAAM;gBACjB,QAAQ,EAAE;cACZ,CAAC,EACD;gBACE,SAAS,EAAE,OAAO;gBAClB,QAAQ,EAAE;cACZ,CAAC,EACD;gBACE,SAAS,EAAE,MAAM;gBACjB,QAAQ,EAAE;cACZ,CAAC;YAEL,CAAC,EAAE;cAAEC,KAAK,EAAE;YAAK,CACnB,CAAC;UACH;UAEA,KAASxB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGW,KAAI,CAACS,YAAY,CAACK,UAAU,CAACC,MAAM,EAAE1B,CAAC,EAAE,EAAE;YAC5DW,KAAI,CAACgB,cAAc,CAACC,IAAI,CAACjB,KAAI,CAACS,YAAY,CAACK,UAAU,CAACzB,CAAC,CAAC,CAAC6B,MAAM,CAAC;UAClE;UAEA,KAAS7B,EAAC,GAAG,CAAC,EAAEA,EAAC,GAAGW,KAAI,CAACS,YAAY,CAACK,UAAU,CAACC,MAAM,EAAE1B,EAAC,EAAE,EAAE;YAC5DW,KAAI,CAACmB,SAAS,CAACF,IAAI,CAACjB,KAAI,CAACS,YAAY,CAACK,UAAU,CAACzB,EAAC,CAAC,CAAC;UACtD;UAACK,QAAA,CAAAE,IAAA;UAAA;QAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OAEsBI,KAAI,CAACE,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAACpB,YAAW,CAACqB,GAAG,CAAC,CAACO,GAAG,CAC1E;YACE,YAAY,EAAE,CACZ;cACE,SAAS,EAAE,UAAU;cACrB,QAAQ,EAAE;YACZ,CAAC,EACD;cACE,SAAS,EAAE,MAAM;cACjB,QAAQ,EAAE;YACZ,CAAC,EACD;cACE,SAAS,EAAE,OAAO;cAClB,QAAQ,EAAE;YACZ,CAAC,EACD;cACE,SAAS,EAAE,MAAM;cACjB,QAAQ,EAAE;YACZ,CAAC,CACF;YACD,iBAAiB,EAAE,CACjB;cACE,SAAS,EAAE,UAAU;cACrB,QAAQ,EAAE;YACZ,CAAC,EACD;cACE,SAAS,EAAE,MAAM;cACjB,QAAQ,EAAE;YACZ,CAAC,EACD;cACE,SAAS,EAAE,OAAO;cAClB,QAAQ,EAAE;YACZ,CAAC,EACD;cACE,SAAS,EAAE,MAAM;cACjB,QAAQ,EAAE;YACZ,CAAC;UAEL,CACF,CAAC;QAAA;UAvCKxB,SAAQ,GAAAM,QAAA,CAAAI,IAAA;QAAA;UAAA,OAAAJ,QAAA,CAAA0B,MAAA,WAyCT;YACLC,KAAK,EAAE;cACL;cACA;cACA;cACAC,QAAQ,EAAEvC,EAAE,CAACwC;YACf;UACF,CAAC;QAAA;QAAA;UAAA,OAAA7B,QAAA,CAAA8B,IAAA;MAAA;IAAA,GAAA1C,OAAA;EAAA,CAGN;EAAA,iBAAA2C,EAAA;IAAA,OAAA/C,IAAA,CAAAgD,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;AAEF,eAAe7D,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}