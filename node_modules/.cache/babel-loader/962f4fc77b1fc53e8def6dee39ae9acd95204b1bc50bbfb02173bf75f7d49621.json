{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shan/SER375/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/shan/SER375/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url.to-json.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport html2canvas from 'html2canvas';\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nexport default {\n  name: \"ListSaver\",\n  mounted: function mounted() {\n    var _this = this;\n    var auth = getAuth();\n    onAuthStateChanged(auth, function (user) {\n      if (user) {\n        _this.initialize();\n      }\n    });\n  },\n  data: function data() {\n    return {\n      show: false,\n      fireSaveData: {},\n      jsonSave: false,\n      imageSave: true,\n      catSelection: 'Unsorted - Bias List',\n      catOptions: []\n    };\n  },\n  methods: {\n    initialize: function initialize() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var auth, currentUser, userDoc, saveData, i, concat, _i, _concat;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              auth = getAuth();\n              currentUser = auth.currentUser;\n              _this2.currUser = currentUser;\n              _context.next = 5;\n              return _this2.$db.collection(\"users\").doc(currentUser.uid).get();\n            case 5:\n              userDoc = _context.sent;\n              saveData = userDoc.data();\n              _this2.fireSaveData = saveData;\n              for (i = 0; i < _this2.fireSaveData.categories.length; i++) {\n                concat = _this2.fireSaveData.categories[i].catName + \" - Bias List\";\n                _this2.catOptions.push(concat);\n              }\n              for (_i = 0; _i < _this2.fireSaveData.groupCategories.length; _i++) {\n                _concat = _this2.fireSaveData.groupCategories[_i].catName + \" - Group List\";\n                _this2.catOptions.push(_concat);\n              }\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    close: function close() {\n      this.show = false;\n    },\n    open: function open() {\n      this.show = true;\n    },\n    uploadJSON: function uploadJSON() {\n      var _this3 = this;\n      document.getElementById(\"import\").onclick = function () {\n        var files = document.getElementById(\"selectFiles\").files;\n        if (files.length <= 0) {\n          return false;\n        }\n        var fr = new FileReader();\n        fr.onload = function (e) {\n          var result = JSON.parse(e.target.result);\n          _this3.fireSaveData = result;\n          _this3.$db.collection(\"users\").doc(_this3.currUser.uid).set(_this3.fireSaveData);\n          _this3.homePageArrays = [];\n          for (var i = 0; i < _this3.fireSaveData.categories.length; i++) {\n            _this3.homePageArrays.push(_this3.fireSaveData.categories[i].people);\n          }\n          _this3.testArray = [];\n          for (var _i2 = 1; _i2 < _this3.fireSaveData.categories.length; _i2++) {\n            _this3.testArray.push(_this3.fireSaveData.categories[_i2]);\n          }\n        };\n        fr.readAsText(files.item(0));\n        _this3.showFileUploader = false;\n      };\n    },\n    saveJSON: function saveJSON() {\n      var a = document.createElement(\"a\");\n      var file = new Blob([JSON.stringify(this.fireSaveData)], {\n        type: 'application/json'\n      });\n      a.href = URL.createObjectURL(file);\n      a.download = 'exportSaveData.json';\n      a.click();\n      this.showFileUploader = false;\n    },\n    saveAsImage: function saveAsImage(id) {\n      html2canvas(document.getElementById(id)).then(function (canvas) {\n        var link = document.createElement('a');\n        if (typeof link.download === 'string') {\n          link.href = canvas.toDataURL();\n          var fileUrl = id.replace(/[^a-zA-Z]+/g, '');\n          console.log(fileUrl);\n          link.download = fileUrl + '.jpeg';\n\n          //Firefox requires the link to be in the body\n          document.body.appendChild(link);\n          //simulate click\n          link.click();\n          //remove the link when done\n          document.body.removeChild(link);\n        } else {\n          window.open(canvas.toDataURL());\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["html2canvas","getAuth","onAuthStateChanged","name","mounted","_this","auth","user","initialize","data","show","fireSaveData","jsonSave","imageSave","catSelection","catOptions","methods","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentUser","userDoc","saveData","i","concat","_i","_concat","wrap","_callee$","_context","prev","next","currUser","$db","collection","doc","uid","get","sent","categories","length","catName","push","groupCategories","stop","close","open","uploadJSON","_this3","document","getElementById","onclick","files","fr","FileReader","onload","e","result","JSON","parse","target","set","homePageArrays","people","testArray","readAsText","item","showFileUploader","saveJSON","a","createElement","file","Blob","stringify","type","href","URL","createObjectURL","download","click","saveAsImage","id","then","canvas","link","toDataURL","fileUrl","replace","console","log","body","appendChild","removeChild","window"],"sources":["/Users/shan/SER375/src/components/ListSaver.vue"],"sourcesContent":["<template>\n    <div class=\"listSaver\" v-show=\"show\" ref=\"saver\" tabindex=\"0\" @blur=\"close\">\n        <button class=\"closeUpload\" @click=\"close\">â•³</button>\n        <select class=\"uploadButton\" v-model=\"catSelection\">\n            <option v-for=\"cat in catOptions\" :value=\"cat\">{{ cat }}</option>\n        </select>\n        <button class=\"uploadButton\" style=\"margin-bottom: 20px\" @click=\"saveAsImage(catSelection)\">Save Category as\n            Image</button>\n        <button class=\"uploadButton\" style=\"margin-bottom: 20px\" @click=\"saveJSON\">Save List as JSON</button>\n        <input class=\"uploadButton\" type=\"file\" id=\"selectFiles\" @click=\"uploadJSON\" />\n        <button class=\"uploadButton\" id=\"import\">Upload List</button>\n    </div>\n</template>\n\n<script>\nimport html2canvas from 'html2canvas';\nimport {\n    getAuth,\n    onAuthStateChanged,\n} from \"firebase/auth\";\n\nexport default {\n    name: \"ListSaver\",\n    mounted() {\n        const auth = getAuth();\n        onAuthStateChanged(auth, (user) => {\n            if (user) {\n                this.initialize();\n            }\n        });\n    },\n    data() {\n        return {\n            show: false,\n            fireSaveData: {},\n            jsonSave: false,\n            imageSave: true,\n            catSelection: 'Unsorted - Bias List',\n            catOptions: []\n        }\n    },\n    methods: {\n        async initialize() {\n            const auth = getAuth();\n            const currentUser = auth.currentUser;\n            this.currUser = currentUser;\n            const userDoc = await this.$db.collection(\"users\").doc(currentUser.uid).get();\n            const saveData = userDoc.data();\n            this.fireSaveData = saveData;\n\n            for (let i = 0; i < this.fireSaveData.categories.length; i++) {\n                let concat = this.fireSaveData.categories[i].catName + \" - Bias List\"\n                this.catOptions.push(concat);\n            }\n            for (let i = 0; i < this.fireSaveData.groupCategories.length; i++) {\n                let concat = this.fireSaveData.groupCategories[i].catName + \" - Group List\"\n                this.catOptions.push(concat);\n            }\n        },\n        close() {\n            this.show = false;\n        },\n        open() {\n            this.show = true;\n        },\n        uploadJSON() {\n            document.getElementById(\"import\").onclick = () => {\n                const files = document.getElementById(\"selectFiles\").files;\n                if (files.length <= 0) {\n                    return false;\n                }\n\n                const fr = new FileReader();\n\n                fr.onload = (e) => {\n                    const result = JSON.parse(e.target.result);\n                    this.fireSaveData = result;\n\n                    this.$db.collection(\"users\").doc(this.currUser.uid).set(this.fireSaveData);\n\n                    this.homePageArrays = [];\n                    for (let i = 0; i < this.fireSaveData.categories.length; i++) {\n                        this.homePageArrays.push(this.fireSaveData.categories[i].people);\n                    }\n                    this.testArray = [];\n                    for (let i = 1; i < this.fireSaveData.categories.length; i++) {\n                        this.testArray.push(this.fireSaveData.categories[i]);\n                    }\n                };\n                fr.readAsText(files.item(0));\n                this.showFileUploader = false;\n            };\n        },\n        saveJSON() {\n            var a = document.createElement(\"a\");\n            var file = new Blob([JSON.stringify(this.fireSaveData)], { type: 'application/json' });\n            a.href = URL.createObjectURL(file);\n            a.download = 'exportSaveData.json';\n            a.click();\n            this.showFileUploader = false;\n        },\n        saveAsImage(id) {\n            html2canvas(document.getElementById(id)).then(canvas => {\n                var link = document.createElement('a');\n\n                if (typeof link.download === 'string') {\n                    link.href = canvas.toDataURL();\n\n                    const fileUrl = id.replace(/[^a-zA-Z]+/g, '');\n                    console.log(fileUrl);\n                    link.download = fileUrl + '.jpeg';\n\n                    //Firefox requires the link to be in the body\n                    document.body.appendChild(link);\n                    //simulate click\n                    link.click();\n                    //remove the link when done\n                    document.body.removeChild(link);\n\n                } else {\n                    window.open(canvas.toDataURL());\n                }\n            });\n        }\n    }\n}\n</script>\n\n<style scoped>\n.listSaver {\n    background: white;\n    border-radius: 5px;\n    box-shadow: 0px 0px 5px black;\n    font-size: 13px;\n    height: fit-content;\n    margin: auto;\n    padding: 5px 10px;\n    line-height: 1px;\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 300px;\n    z-index: 999;\n}\n\n.uploadButton {\n    background-color: #b3b8e9;\n    border: 1px solid #848484;\n    border-radius: 5px;\n    color: rgb(0, 0, 0);\n    cursor: pointer;\n    display: inline-block;\n    font-size: 16px;\n    margin: 4px 2px;\n    padding: 7px 15px;\n    text-align: center;\n    text-decoration: none;\n    width: 100%;\n}\n\n.uploadButton:hover {\n    background-color: #505cc7;\n}\n\n.closeUpload {\n    background-color: #b3b8e9;\n    border: 1px solid #848484;\n    border-radius: 5px;\n    color: rgb(0, 0, 0);\n    cursor: pointer;\n    display: block;\n    float: right;\n    font-size: 16px;\n    margin-bottom: 20px;\n    text-align: center;\n    text-decoration: none;\n}\n\n.closeUpload:hover {\n    background-color: #505cc7;\n}\n</style>"],"mappings":";;;;;;;;;;;;;;;;;AAeA,OAAOA,WAAU,MAAO,aAAa;AACrC,SACIC,OAAO,EACPC,kBAAkB,QACf,eAAe;AAEtB,eAAe;EACXC,IAAI,EAAE,WAAW;EACjBC,OAAO,WAAAA,QAAA,EAAG;IAAA,IAAAC,KAAA;IACN,IAAMC,IAAG,GAAIL,OAAO,CAAC,CAAC;IACtBC,kBAAkB,CAACI,IAAI,EAAE,UAACC,IAAI,EAAK;MAC/B,IAAIA,IAAI,EAAE;QACNF,KAAI,CAACG,UAAU,CAAC,CAAC;MACrB;IACJ,CAAC,CAAC;EACN,CAAC;EACDC,IAAI,WAAAA,KAAA,EAAG;IACH,OAAO;MACHC,IAAI,EAAE,KAAK;MACXC,YAAY,EAAE,CAAC,CAAC;MAChBC,QAAQ,EAAE,KAAK;MACfC,SAAS,EAAE,IAAI;MACfC,YAAY,EAAE,sBAAsB;MACpCC,UAAU,EAAE;IAChB;EACJ,CAAC;EACDC,OAAO,EAAE;IACCR,UAAU,WAAAA,WAAA,EAAG;MAAA,IAAAS,MAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAf,IAAA,EAAAgB,WAAA,EAAAC,OAAA,EAAAC,QAAA,EAAAC,CAAA,EAAAC,MAAA,EAAAC,EAAA,EAAAC,OAAA;QAAA,OAAAT,mBAAA,GAAAU,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACT3B,IAAG,GAAIL,OAAO,CAAC,CAAC;cAChBqB,WAAU,GAAIhB,IAAI,CAACgB,WAAW;cACpCL,MAAI,CAACiB,QAAO,GAAIZ,WAAW;cAAAS,QAAA,CAAAE,IAAA;cAAA,OACLhB,MAAI,CAACkB,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAACf,WAAW,CAACgB,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC;YAAA;cAAvEhB,OAAM,GAAAQ,QAAA,CAAAS,IAAA;cACNhB,QAAO,GAAID,OAAO,CAACd,IAAI,CAAC,CAAC;cAC/BQ,MAAI,CAACN,YAAW,GAAIa,QAAQ;cAE5B,KAASC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAIR,MAAI,CAACN,YAAY,CAAC8B,UAAU,CAACC,MAAM,EAAEjB,CAAC,EAAE,EAAE;gBACtDC,MAAK,GAAIT,MAAI,CAACN,YAAY,CAAC8B,UAAU,CAAChB,CAAC,CAAC,CAACkB,OAAM,GAAI,cAAa;gBACpE1B,MAAI,CAACF,UAAU,CAAC6B,IAAI,CAAClB,MAAM,CAAC;cAChC;cACA,KAASD,EAAA,GAAI,CAAC,EAAEA,EAAA,GAAIR,MAAI,CAACN,YAAY,CAACkC,eAAe,CAACH,MAAM,EAAEjB,EAAC,EAAE,EAAE;gBAC3DC,OAAK,GAAIT,MAAI,CAACN,YAAY,CAACkC,eAAe,CAACpB,EAAC,CAAC,CAACkB,OAAM,GAAI,eAAc;gBAC1E1B,MAAI,CAACF,UAAU,CAAC6B,IAAI,CAAClB,OAAM,CAAC;cAChC;YAAA;YAAA;cAAA,OAAAK,QAAA,CAAAe,IAAA;UAAA;QAAA,GAAAzB,OAAA;MAAA;IACJ,CAAC;IACD0B,KAAK,WAAAA,MAAA,EAAG;MACJ,IAAI,CAACrC,IAAG,GAAI,KAAK;IACrB,CAAC;IACDsC,IAAI,WAAAA,KAAA,EAAG;MACH,IAAI,CAACtC,IAAG,GAAI,IAAI;IACpB,CAAC;IACDuC,UAAU,WAAAA,WAAA,EAAG;MAAA,IAAAC,MAAA;MACTC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACC,OAAM,GAAI,YAAM;QAC9C,IAAMC,KAAI,GAAIH,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACE,KAAK;QAC1D,IAAIA,KAAK,CAACZ,MAAK,IAAK,CAAC,EAAE;UACnB,OAAO,KAAK;QAChB;QAEA,IAAMa,EAAC,GAAI,IAAIC,UAAU,CAAC,CAAC;QAE3BD,EAAE,CAACE,MAAK,GAAI,UAACC,CAAC,EAAK;UACf,IAAMC,MAAK,GAAIC,IAAI,CAACC,KAAK,CAACH,CAAC,CAACI,MAAM,CAACH,MAAM,CAAC;UAC1CT,MAAI,CAACvC,YAAW,GAAIgD,MAAM;UAE1BT,MAAI,CAACf,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAACa,MAAI,CAAChB,QAAQ,CAACI,GAAG,CAAC,CAACyB,GAAG,CAACb,MAAI,CAACvC,YAAY,CAAC;UAE1EuC,MAAI,CAACc,cAAa,GAAI,EAAE;UACxB,KAAK,IAAIvC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAIyB,MAAI,CAACvC,YAAY,CAAC8B,UAAU,CAACC,MAAM,EAAEjB,CAAC,EAAE,EAAE;YAC1DyB,MAAI,CAACc,cAAc,CAACpB,IAAI,CAACM,MAAI,CAACvC,YAAY,CAAC8B,UAAU,CAAChB,CAAC,CAAC,CAACwC,MAAM,CAAC;UACpE;UACAf,MAAI,CAACgB,SAAQ,GAAI,EAAE;UACnB,KAAK,IAAIzC,GAAA,GAAI,CAAC,EAAEA,GAAA,GAAIyB,MAAI,CAACvC,YAAY,CAAC8B,UAAU,CAACC,MAAM,EAAEjB,GAAC,EAAE,EAAE;YAC1DyB,MAAI,CAACgB,SAAS,CAACtB,IAAI,CAACM,MAAI,CAACvC,YAAY,CAAC8B,UAAU,CAAChB,GAAC,CAAC,CAAC;UACxD;QACJ,CAAC;QACD8B,EAAE,CAACY,UAAU,CAACb,KAAK,CAACc,IAAI,CAAC,CAAC,CAAC,CAAC;QAC5BlB,MAAI,CAACmB,gBAAe,GAAI,KAAK;MACjC,CAAC;IACL,CAAC;IACDC,QAAQ,WAAAA,SAAA,EAAG;MACP,IAAIC,CAAA,GAAIpB,QAAQ,CAACqB,aAAa,CAAC,GAAG,CAAC;MACnC,IAAIC,IAAG,GAAI,IAAIC,IAAI,CAAC,CAACd,IAAI,CAACe,SAAS,CAAC,IAAI,CAAChE,YAAY,CAAC,CAAC,EAAE;QAAEiE,IAAI,EAAE;MAAmB,CAAC,CAAC;MACtFL,CAAC,CAACM,IAAG,GAAIC,GAAG,CAACC,eAAe,CAACN,IAAI,CAAC;MAClCF,CAAC,CAACS,QAAO,GAAI,qBAAqB;MAClCT,CAAC,CAACU,KAAK,CAAC,CAAC;MACT,IAAI,CAACZ,gBAAe,GAAI,KAAK;IACjC,CAAC;IACDa,WAAW,WAAAA,YAACC,EAAE,EAAE;MACZnF,WAAW,CAACmD,QAAQ,CAACC,cAAc,CAAC+B,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,UAAAC,MAAK,EAAK;QACpD,IAAIC,IAAG,GAAInC,QAAQ,CAACqB,aAAa,CAAC,GAAG,CAAC;QAEtC,IAAI,OAAOc,IAAI,CAACN,QAAO,KAAM,QAAQ,EAAE;UACnCM,IAAI,CAACT,IAAG,GAAIQ,MAAM,CAACE,SAAS,CAAC,CAAC;UAE9B,IAAMC,OAAM,GAAIL,EAAE,CAACM,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;UAC7CC,OAAO,CAACC,GAAG,CAACH,OAAO,CAAC;UACpBF,IAAI,CAACN,QAAO,GAAIQ,OAAM,GAAI,OAAO;;UAEjC;UACArC,QAAQ,CAACyC,IAAI,CAACC,WAAW,CAACP,IAAI,CAAC;UAC/B;UACAA,IAAI,CAACL,KAAK,CAAC,CAAC;UACZ;UACA9B,QAAQ,CAACyC,IAAI,CAACE,WAAW,CAACR,IAAI,CAAC;QAEnC,OAAO;UACHS,MAAM,CAAC/C,IAAI,CAACqC,MAAM,CAACE,SAAS,CAAC,CAAC,CAAC;QACnC;MACJ,CAAC,CAAC;IACN;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}